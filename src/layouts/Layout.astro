---
import profileImage from '../assets/profile.webp';
import SpeedInsights  from '@vercel/speed-insights/astro';

interface Props {
	title?: string;
	description?: string;
	image?: string;
	articleSchema?: boolean;
	robots?: string;
}

const {
	title = "Leo Felcianas - DevOps Engineer & Software Developer",
	description = "DevOps/Backend specialist crafting efficient and scalable solutions. Expert in cloud architecture, containerization, and modern development practices.",
	image = "/og-image.svg",
	articleSchema = false,
	robots = "index, follow"
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const socialImageURL = new URL(image, Astro.site);
const profileImageURL = new URL(profileImage.src, Astro.site);
---

<!doctype html>
<html lang="en" transition:animate="none" class="scroll-smooth">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		
		<!-- Google Site Verification -->
		<meta name="google-site-verification" content="google34f30110b42c1453" />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title}>
		<meta name="description" content={description}>
		<meta name="author" content="Leo Felcianas">
		<meta name="keywords" content="DevOps Engineer, Software Developer, Backend Developer, Cloud Architecture, Containerization, CI/CD, Kubernetes, Docker, NestJS, TypeScript">
		<link rel="canonical" href={canonicalURL} />

		<!-- Favicons -->
		<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90' font-family='Fira Code' font-weight='bold' text-anchor='middle' x='50' y='50' dominant-baseline='middle' fill='%237aa2f7'>LF</text></svg>" />
		<meta name="msapplication-TileColor" content="#1a1b26">
		<meta name="theme-color" content="#1a1b26">
		<meta name="robots" content={robots}>
		<meta name="googlebot" content={robots}>
		<meta name="revisit-after" content="7 days">
		<meta name="rating" content="general">
		
		<!-- Web App Manifest -->
		<link rel="manifest" href="/manifest.json">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="Leo Felcianas">

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website">
		<meta property="og:url" content={canonicalURL}>
		<meta property="og:title" content={title}>
		<meta property="og:description" content={description}>
		<meta property="og:image" content={socialImageURL}>
		<meta property="og:image:width" content="1200">
		<meta property="og:image:height" content="630">
		<meta property="og:locale" content="en_US">
		<meta property="og:site_name" content="Leo Felcianas">

		<!-- Twitter -->
		<meta property="twitter:card" content="summary_large_image">
		<meta property="twitter:url" content={canonicalURL}>
		<meta property="twitter:title" content={title}>
		<meta property="twitter:description" content={description}>
		<meta property="twitter:image" content={socialImageURL}>

		<meta name="view-transition" content="same-origin" />
		
		<!-- Preconnect to external resources -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
		
		

		<!-- Structured Data / JSON-LD -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Person",
			"name": "Leo Felcianas",
			"jobTitle": "DevOps Engineer & Software Developer",
			"description": "DevOps/Backend specialist crafting efficient and scalable solutions. Expert in cloud architecture, containerization, and modern development practices.",
			"url": "https://itsme.dfanso.dev/",
			"image": profileImageURL,
			"sameAs": [
				"https://github.com/dfanso",
				"https://linkedin.com/in/dfanso"
			],
			"alumniOf": {
				"@type": "CollegeOrUniversity",
				"name": "University of Plymouth",
				"sameAs": "https://www.plymouth.ac.uk/"
			},
			"knowsAbout": ["DevOps", "Cloud Architecture", "Backend Development", "Kubernetes", "Docker", "NestJS", "TypeScript"]
		})}>
		</script>
		
		{articleSchema && (
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Article",
			"headline": title,
			"description": description,
			"image": socialImageURL,
			"author": {
				"@type": "Person",
				"name": "Leo Felcianas",
				"url": "https://itsme.dfanso.dev/"
			},
			"publisher": {
				"@type": "Person",
				"name": "Leo Felcianas",
				"url": "https://itsme.dfanso.dev/"
			},
			"url": canonicalURL,
			"datePublished": new Date().toISOString(),
			"dateModified": new Date().toISOString()
		})}>
		</script>
		)}
		
		<!-- SEO improvement - website schema -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "WebSite",
			"name": "Leo Felcianas Portfolio",
			"url": "https://itsme.dfanso.dev/",
			"potentialAction": {
				"@type": "SearchAction",
				"target": "https://itsme.dfanso.dev/?s={search_term_string}",
				"query-input": "required name=search_term_string"
			}
		}
		</script>
	</head>
	<body class="no-js bg-[#1a1b26] text-[#c0caf5] h-screen overflow-hidden font-mono selection:bg-[#7aa2f7] selection:text-[#1a1b26]">
		<div class="fixed inset-0 -z-10 bg-[#1a1b26]">
			<div class="absolute inset-0 bg-[#1a1b26]"></div>
		</div>
		<main class="relative h-full">
			<slot />
		</main>
		<SpeedInsights />
	</body>
</html>

<style is:global>
	:root {
		--primary: #7aa2f7;
		--secondary: #9ece6a;
		--text: #c0caf5;
		--bg: #1a1b26;
		--accent: #bb9af7;
	}

	body {
		font-family: 'JetBrains Mono', monospace;
		background-color: var(--bg);
		position: relative;
		min-height: 100vh;
		overflow: hidden;
	}

	body::before,
	body::after {
		content: '';
		position: fixed;
		inset: 0;
		pointer-events: none;
		z-index: -2;
	}

	body::before {
		background: radial-gradient(circle at 20% 20%, rgba(122, 162, 247, 0.25), transparent 45%),
					radial-gradient(circle at 80% 0%, rgba(187, 154, 247, 0.18), transparent 40%),
					radial-gradient(circle at 50% 80%, rgba(158, 206, 106, 0.12), transparent 35%);
		filter: blur(40px);
		animation: auroraShift 18s ease-in-out infinite alternate;
	}

	body::after {
		background-image: 
			repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.01) 0, rgba(255, 255, 255, 0.01) 2px, transparent 2px, transparent 4px),
			repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.015) 0, rgba(255, 255, 255, 0.015) 2px, transparent 2px, transparent 4px);
		mix-blend-mode: screen;
		opacity: 0.3;
		animation: noiseDrift 6s steps(2) infinite;
	}

	@keyframes auroraShift {
		0% {
			transform: translate3d(-5%, -5%, 0) scale(1);
		}
		50% {
			transform: translate3d(5%, 3%, 0) scale(1.05);
		}
		100% {
			transform: translate3d(-3%, 4%, 0) scale(1.02);
		}
	}

	@keyframes noiseDrift {
		0% { transform: translate3d(0, 0, 0); }
		100% { transform: translate3d(-3%, 3%, 0); }
	}

	.command-prompt {
		color: var(--primary);
	}

	a {
		color: var(--primary);
		text-decoration: none;
		transition: color 0.2s ease;
	}

	a:hover {
		color: var(--accent);
	}

	.section-title {
		color: var(--primary);
		font-size: 1rem;
		font-weight: 500;
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	/* Custom scrollbar */
	::-webkit-scrollbar {
		width: 4px;
	}

	::-webkit-scrollbar-track {
		background: transparent;
	}

	::-webkit-scrollbar-thumb {
		background: var(--primary);
		border-radius: 4px;
	}

	::-webkit-scrollbar-thumb:hover {
		background: var(--accent);
	}

	/* Terminal-style text selection */
	::selection {
		background: var(--primary);
		color: var(--bg);
	}
</style>
